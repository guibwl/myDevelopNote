# 面向对象

**什么是面向对象？**

在不同的编程语言中，设计者也利用各种不同的语言特性来抽象描述对象，最为成功的流派是使用“类”的方式来描述对象，这诞生了诸如 C++、Java 等流行的编程语言。

而 JavaScript 早年却选择了一个更为冷门的方式：原型。

**JavaScript 对象的特征**

不论我们使用什么样的编程语言，我们都先应该去理解对象的本质特征（参考 Grandy Booch《面向对象分析与设计》）。总结来看，对象有如下几个特点。

* 对象具有唯一标识性：即使完全相同的两个对象，也并非同一个对象。

我们先来看第一个特征，对象具有唯一标识性。一般而言，各种语言的对象唯一标识性都是用内存地址来体现的， 对象具有唯一标识的内存地址，所以具有唯一的标识。

* 对象有状态：对象具有状态，同一对象可能处于不同状态之下。
* 对象具有行为：即对象的状态，可能因为它的行为产生变迁。

关于对象的第二个和第三个特征“状态和行为”，不同语言会使用不同的术语来抽象描述它们，比如 C++ 中称它们为“成员变量”和“成员函数”，Java 中则称它们为“属性”和“方法”。
在 JavaScript 中，将状态和行为统一抽象为“属性”，考虑到 JavaScript 中将函数设计成一种特殊对象，所以 JavaScript 中的行为和状态都能用属性来抽象。

下面这段代码其实就展示了普通属性和函数作为属性的一个例子，其中 o 是对象，d 是一个属性，而函数 f 也是一个属性，尽管写法不太相同，但是对 JavaScript 来说，d 和 f 就是两个普通属性。

```js
var o = { 
    d: 1,
    f() {
        console.log(this.d);
    }    
};
```
所以，总结一句话来看，在 JavaScript 中，对象的状态和行为其实都被抽象为了属性。如果你用过 Java，一定不要觉得奇怪，尽管设计思路有一定差别，但是二者都很好地表现了对象的基本特征：标识性、状态和行为。

在实现了对象基本特征的基础上, JavaScript 中对象独有的特色是：对象具有高度的动态性，这是因为 JavaScript 赋予了使用者在运行时为对象添改状态和行为的能力。

```js
var o = { a: 1 };
o.b = 2;
console.log(o.a, o.b); //1 2
```

为了提高抽象能力，JavaScript 的属性被设计成比别的语言更加复杂的形式，它提供了数据属性和访问器属性（getter/setter）两类。

**Javascript 的数据属性和访问器属性**

Javascript 标准对基于对象的定义：‘语言和宿主的基础设施由对象来提供，并且Javascript程序即是一系列相互通讯的对象集合’；
可见对象在JavaScript中是多么的重要。对象中每个属性都有它的属性描述符，根据不同的属性描述符，我们可以判断这个属性是数据属性还是访问器属性。
我们可以通过 Object.getOwnPropertyDescriptor 来读取某个属性的描述符，通过 Object.defineProperty 来设置某个属性的描述符。

数据属性拥有以下特征:

* value：就是属性的值。
* writable：决定属性能否被赋值。
* enumerable：决定 for in 能否枚举该属性。
* configurable：决定该属性能否被删除或者改变特征值。

访问器（getter/setter）属性拥有以下特征:

* getter：函数或 undefined，在取属性值时被调用。
* setter：函数或 undefined，在设置属性值时被调用。
* enumerable：决定 for in 能否枚举该属性。
* configurable：决定该属性能否被删除或者改变特征值。

这里需要注意，以上两种属性类型是互斥的，在定义属性描述符时，只能选择其一。

**总结**

Javascript 是一种面向对象的语言，JavaScript 提供了完全运行时的对象系统，这使得它可以模仿多数面向对象编程范式，因为其基于原型（比较主流的是基于类）的范式，所以一度有人误认为其是“基于对象的语言”。