!function(){function t(){var t="",e="";try{t=window.screen.width,e=window.screen.height}catch(r){}return t+"*"+e}function e(){var t="Android";return f.match(/(Android)\s+([\d.]+)/)&&(t="Android_"+f.match(/(Android)\s+([\d.]+)/)[2]),(f.match(/(iPad).*OS\s([\d_]+)/)||f.match(/(iPhone\sOS)\s([\d_]+)/))&&(t="iOS_"+(f.match(/(iPad).*OS\s([\d_]+)/)?f.match(/(iPad).*OS\s([\d_]+)/)[2]:f.match(/(iPhone\sOS)\s([\d_]+)/)[2])),f.match(/Windows Phone/)&&(t="WP"),t}function r(){var t,e,r=navigator.userAgent.toLowerCase(),n={};try{if(e=r.match(/(?:newsarticle|safari|chrome|msie|micromessenger)[\/: ]([\d.]+)/),e=e?e[1]:"0",n={version:e,safari:/version.+safari/.test(r)||/safari[\/ ]+([\d.]+)/.test(r),chrome:/chrome\/([\d.]+)/.test(r)||/crios\/([\d.]+)/.test(r),ie:/msie/.test(r)||/trident/.test(r),tt:/newsarticle/.test(r),uc:/ucbrowser\/([\d.]+)/.test(r),qq:/qqbrowser/.test(r),wx:/micromessenger/.test(r),facebook:/fban/.test(r),twitter:/twitter/.test(r)},t=n.version.split(".")[0],n.uc)return t=r.match(/ucbrowser\/([\d.]+)/)[1],"UC_"+t;if(n.qq)return t=r.match(/qqbrowser\/([\d.]+)/)[1],"QQ_"+t;if(n.tt)return t=r.match(/newsarticle\/([\d.]+)/)[1],"toutiao_"+t;if(n.chrome)return t=r.match(/chrome\/([\d.]+)/)[1],"chrome_"+t;if(n.wx)return t=r.match(/micromessenger\/([\d.]+)/)[1],"weixin_"+t;if(n.safari){if(r.match(/android/))return"Webkit_"+r.match(/webkit\/([\d.]+)/)[1];try{r.match(/(?:version)[\/: ]([\d.]+)/)&&(t=r.match(/(?:version)[\/: ]([\d.]+)/)[1])}catch(a){}return"safari_"+t}if(n.ie)return r.indexOf("rv:11")>-1&&(t="11"),"IE_"+t;if(n.facebook)return"facebook";if(n.twitter)return"twitter"}catch(o){return"unkonw"}return"unkonw"}function n(){var t=f.match(/NetType\/([^\s]*)/i),e="WIFI";return t&&(e=t[1]),e}function a(){var t=localStorage._ta;if(!t){var e=Math.random(),r=+new Date;t="TA."+e+"."+r,localStorage._ta=t}return t}function o(t,e){t=t||{};for(var r in h)t[r]=h[r];var n=[];for(var a in t)n.push(a+"="+t[a]);var o=new Image,i=d+"?"+n.join("&");o.src=i;var s=window.TT_PERF_CONFIG||p;if(s.metrics===!0){var c=s.percent||p.percent;if(e||Math.floor(100*Math.random())<c){var f=(e?m:u).replace("{PATHNAME}",t.pathname);f+="?"+n.join("&");var v=new Image;v.src=f}}}function i(){var a={screen:t(),dpr:window.devicePixelRatio||1,net_type:n(),iframes:document.querySelectorAll("iframe").length,system:e(),browser:r()};return a}function s(){var t=i();if(t.event="pv","object"==typeof performance){var e=performance.timing;t.redirect_count=performance.navigation.redirectCount,t.redirect=e.redirectEnd-e.redirectStart,t.dns=e.domainLookupEnd-e.domainLookupStart,t.tcp=e.connectEnd-e.connectStart,t.request=e.responseStart-e.requestStart,t.response=e.responseEnd-e.responseStart,t.processing=e.domComplete-e.domLoading,t.blank=e.responseEnd-e.navigationStart,t.domready=e.domInteractive-e.navigationStart,t.load=e.loadEventEnd-e.navigationStart}o(t)}var c=location.protocol;c="http:"!==c&&"https:"!==c?"https:":"";var d=c+"//www.toutiao.com/__utm.gif",u=c+"//m.toutiao.com/log/sentry/v2/api/{PATHNAME}/perf/",m=c+"//m.toutiao.com/log/sentry/v2/api/{PATHNAME}/counter/",f=navigator.userAgent,h={},p={metrics:!1,percent:20};h.pathname=encodeURIComponent(location.pathname),h.hostname=location.hostname,h._ta=a();for(var v=document.querySelectorAll("meta"),l=0;l<v.length;l++)"pathname"===v[l].name&&(h.pathname=v[l].content);window.sendToutiaoGifLog=o,window.sendTTCustomizeLog=function(t,e){var r=i();r.tt_perf_key=[t,e].join("~"),o(r)},window.sendTTCounterLog=function(t,e){var r=i();r.n=t,r.v=e;var n=!0;o(r,n)},window.addEventListener&&window.performance&&window.addEventListener("load",function(){setTimeout(s,1e3)},!1)}(),!function(t){function e(t,e){return t=t&&t.split("?")[0]||"",e.url=t,t}function r(t,e){var r=u.test(e.url)?"err_self":"err_other";e.from=r,t[r]=1}function n(t,e,r){var n=r.from+"_",a="";t=/img|script|link|video|audio/.test(t)?t:"other","err_self"===r.from&&"other"===t&&(t=/medium|list|thumb|large|origin/.test(r.url)?"img":t),a=n+t,r.type=t,e[a]=1}function a(t,e){if("err_self"===e.from&&/script|link/.test(e.type)){var r=e.url.split("/")[3]||"",n="err_self_biz_",a=n+"all",o="",i="";r=m.test(r)?r:"other",o=n+r+"_all",i=n+r+"_"+e.type,e.biz=r,t[a]=1,t[o]=1,t[i]=1}}function o(t,e){if("err_self"===e.from){var r=e.url.split("/")[2]||"",n="err_dm_"+r;e.domain=r,t[n]=1}}function i(e){var r=e.type;if("img"!==r&&"video"!==r&&"audio"!==r){var n="STATIC_ERROR:";n+=e.from+":",e.biz&&(n+=e.biz+":"),n+=e.type+":",n+=e.url,t.Raven&&t.Raven.captureMessage&&t.Raven.captureMessage(n)}}function s(e){var r=[];for(var n in e)r.push(n);r=r.join("~"),t.sendTTCounterLog&&t.sendTTCounterLog(r)}function c(t,e){Math.floor(100*Math.random())>=f||(i(t),s(e))}function d(i){var s=i||t.event||{},d=s.target||s.srcElement||{},u=d.src||d.href||"",m=d.tagName&&d.tagName.toLowerCase()||"",f={err_all:1},h={url:"",from:"",biz:"",type:"",domain:""};e(u,h)&&(r(f,h),n(m,f,h),a(f,h),o(f,h),c(h,f))}var u=/\.pstatp\.com\/|\.bytecdn\.cn\/|\.365yg\.com\//,m=/toutiao|growth|neihan|aweme|huoshan|pgc/,f=t.TT_PERF_CONFIG&&t.TT_PERF_CONFIG.percent||20;t.addEventListener&&t.addEventListener("error",d,!0)}(window,void 0),!function(t){function e(e){var r="AJAX_ERROR:"+e.status;t.Raven&&t.Raven.captureMessage&&t.Raven.captureMessage(r)}function r(){t.sendTTCounterLog&&t.sendTTCounterLog("ajax_error")}function n(t){Math.floor(100*Math.random())>=s||(e(t),r())}function a(t,e){return this.ajaxUrl=e&&e.split("?")[0]||"",c.apply(this,arguments)}function o(){return 4===this.readyState&&(this.status>=200&&this.status<300||n({url:this.ajaxUrl,status:this.status})),this._onreadystatechange?this._onreadystatechange.apply(this,arguments):void 0}function i(){return this.onreadystatechange&&(this._onreadystatechange=this.onreadystatechange),this.onreadystatechange=o,d.apply(this,arguments)}if(t.TT_PERF_CONFIG&&(!t.TT_PERF_CONFIG||t.TT_PERF_CONFIG.ajaxMonitor)){var s=t.TT_PERF_CONFIG&&t.TT_PERF_CONFIG.percent||20;if("function"==typeof t.XMLHttpRequest){var c=t.XMLHttpRequest.prototype.open,d=t.XMLHttpRequest.prototype.send;t.XMLHttpRequest.prototype.open=a,t.XMLHttpRequest.prototype.send=i}}}(window,void 0);